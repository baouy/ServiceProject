<html>
<head>
	<script type="text/javascript">

		var selected; //选中的记录
		var source, provincename, cityname, districtname, custlevel, districtname;
		var enter = $(".navtab-tab .active").children("a").attr("title");//判断是哪个菜单列表进入的
		/**
		 *
		 * 编辑页面需要用到的字段
		 */
		function init() {
			switch (enter) {
				case "目标客户档案":
					selected = $("#customer_list_tabel").find('tr.datagrid-selected-tr');
					$("#customer_design").removeClass("hide");
					$("#customer_sale").removeClass("hide");
					$("#customer_electric").removeClass("hide");
					createHtml();
					break;
				case "客户档案(美聊)":
					if ($("#btn_list .active").children("a").text() == "需跟进客户") {
						selected = $("#customer_telephonesales_1").find('tr.datagrid-selected-tr');
						createHtml();
					} else if ($("#btn_list .active").children("a").text() == "已转销售") {
						selected = $("#customer_telephonesales_2").find('tr.datagrid-selected-tr');
						createHtml();
					} else if ($("#btn_list .active").children("a").text() == "回收池") {
						selected = $("#customer_telephonesales_3").find('tr.datagrid-selected-tr');
						createHtml();
					} else if ($("#btn_list .active").children("a").text() == "新客户") {
						$("#customer_electric").addClass("hide");
						selected = $("#customer_telephonesales").find('tr.datagrid-selected-tr');
						createHtml();
					}
					break;
				case "客户档案(销售)":
					if ($("#customer_sale_menuTab .active").children("a").text() == "销售跟进") {
						selected = $("#customer_sales").find('tr.datagrid-selected-tr');
						createHtml();
					} else if ($("#customer_sale_menuTab .active").children("a").text() == "已成交") {
						selected = $("#customer_sales_2").find('tr.datagrid-selected-tr');
						createHtml();
					} else if ($("#customer_sale_menuTab .active").children("a").text() == "回收池") {
						selected = $("#customer_sales_3").find('tr.datagrid-selected-tr');
						createHtml();
					}
					break;
				case "客户档案(设计)":
					if ($("#customer_design_menuTab .active").children("a").text() == "设计跟进") {
						selected = $("#customer_designList").find('tr.datagrid-selected-tr');
						createHtml();
					} else if ($("#customer_design_menuTab .active").children("a").text() == "回收池") {
						selected = $("#customer_recycleList").find('tr.datagrid-selected-tr');
						createHtml();
					}
					break;
				case "成交跟进":
					selected = $("#complete_follow").find('tr.datagrid-selected-tr');
					createHtml();
					break;
				case "客户档案(渠道)":
					selected = $(selected_channel_name).find('tr.datagrid-selected-tr');
					createHtml();
					break;
				default:
					break
			}

		}
		init();


		function createHtml() {
			if (selected.length == 0) {
				BJUI.alertmsg('error', '请在列表中选择要操作的对象。');
				BJUI.dialog('closeCurrent', this);
			} else if (selected.length > 1) {
				BJUI.alertmsg('error', '请选择唯一的操作对象。');
				BJUI.dialog('closeCurrent', this);
			} else {
				/**
				 * 获取客户详细信息
				 * */
				$.ajax({
					url: '/v1/customer/get?cid=' + selected[0].lastChild.innerText,
					dataType: 'json',
					type: 'GET',
					xhrFields: {
						withCredentials: true
					},
					crossDomain: true,
					success: function (d) {
						console.log(selected[0]);
						for (var i in d.data) {
								$("#customer_" + i).val(d.data[i]);//将用到的数据渲染到页面中
								if (i == "source") {
									source = d.data["source"];
								} else if (i == "provincename") {
									provincename = d.data["provincename"];
								} else if (i == "cityname") {
									cityname = d.data["cityname"];
								} else if (i == "districtname"){
									districtname = d.data["districtname"];
								} else if (i == "custlevel") {
									var selectedOp = d.data["custlevel"];
									$("#customer_custlevel option[text=selectedOp]").attr("selected", true);
								}else if (i == "roomstatus"){
									$("#customer_roomstatus").selectpicker('val', d.data[i]);
								}else if (i == "decoratestate"){
									$("#customer_decoratestate").selectpicker('val', d.data[i]);
								}else if (i == "intention"){
									$("#customer_intention").selectpicker('val', d.data[i]);
								}else if (i == "roommodel"){
									$("#customer_roommodel").selectpicker('val', d.data[i]);
								}else if (i == "sex"){
									$("#customer_sex").selectpicker('val', d.data[i]);
								}else if (i == "isplan"){
									$("#customer_isplan").selectpicker('val', d.data[i]);
								}
						}
						customer_getSource();
						customer_getProvice();
						var cusId = selected[0].lastChild.innerText;
						customer_getFollows(cusId);
					}
				});
			}
		}

		/***
		 * 获取跟进记录列表 编辑和新增页面公用方法
		 * */
		function customer_getFollows(id) {
			$('#customer_notes').datagrid({
				local: 'remote',
				dataUrl: '/v1/record/customerfollow?tcustomerid_fk=' + id,
				dataType: 'json',
				sortAll: false,
				loadType: 'get',
				filterAll: true,
				height:'95%',
				columns: [
					{name: 'followstate', width: '70', label: '跟进状态'},
					{name: 'followtype', width: '100', label: '跟进类型'},
					{name: 'followdetails', width: '150', label: '跟进内容'},
					{name: 'followdate', width: '150', label: '跟进日期'},
					{name: 'duration', width: '90', label: '沟通时长'},
					{name: 'appdate', width: '150', label: '预约日期', type: 'date'},
					{name: 'apptime', width: '100', label: '预约时间段'},
					{name: 'appaddress', width: '150', label: '预约地点'},
					{name: 'adults', width: '60', label: '成人人数'},
					{name: 'oldman', width: '60', label: '老人人数'},
					{name: 'child', width: '60', label: '小孩人数'},
					{name: 'createtime', width: '150', label: '录入时间', type: 'date', pattern: "yyyy-MM-dd HH:mm"},
					{name: 'createuser', width: '90', label: '录入人'},//items:[{'true':'男'}, {'false':'女'}],type:'select'
					{name: 'createuserid', width: '0', label: '录入人ID',hide: true},
					{name: 'id', width: '80', label: '主键', hide: true}
				],
//                                editMode:'dialog',
//                                columnResize:true,//允许调整列宽
//                                showToolbar:true,//头部显示工具栏
//                                toolbarItem: 'all, edit, cancel',//头部显示所有工具栏
				showLinenumber: true,
				paging: {pageSize: 50, selectPageSize: '50,100,200', pageCurrent: 1},
				columnMenu: true,
				columnShowhide: true,
				columnFilter: true,
				columnLock: false,
				fullGrid: false,


			});
		}

		/**
		 * 获取来源列表
		 * **/
		function customer_getSource() {
			var vl, sourceText;
			$.ajax({
				url: "/v1/other/getalltype?type=10",
				type: "GET",
				dataType: "json",
				success: function (data) {
					for (var i = 0; i < data.data.length; i++) {
						if (data.data[i].enumname == source) {
							$("#customer_source").append($("<option selected value=" + data.data[i].id + ">" + data.data[i].enumname + "</option>"));
							vl = $('#customer_source option:selected').val();//默认选中的值是第一条的值
							sourceText = $('#customer_source option:selected').text();//默认选中的文本是第一条

							$("input[name='sourceid']").attr("value", vl);
							$("input[name='source']").attr("value", sourceText);
						} else {
							$("#customer_source").append($("<option value=" + data.data[i].id + ">" + data.data[i].enumname + "</option>"));
						}
					}
					$('#customer_source').selectpicker('refresh');
					$('#customer_source').selectpicker('render');

				}
			});
		}

		$("#customer_source").change(function(){
			var text = $('#customer_source option:selected').text();
			$("input[name='sourceid']").attr("value",$(this).val());//选中的值
			$("input[name='source']").attr("value",text);//选中的文本
		});

		/**
		 * 获取省列表
		 */
		function customer_getProvice() {
			$.ajax({
				url: "/v1/other/getprovcityareastreet?levelID=1",
				type: "GET",
				dataType: "json",
				success: function (data) {
					if (provincename != "") { //省份不为空时
						for (var i = 0; i < data.data.length; i++) {
							if (data.data[i].name == provincename) {
								$("#customer_provincename").append($("<option selected value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
							} else {
								$("#customer_provincename").append($("<option value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
							}
						}
						var province = $('#customer_provincename option:selected').text();
						$("input[name='provincename']").attr("value", province);//选中的值

						customer_getCity($('#customer_provincename option:selected').val());//省份列表获取成功后,获取省份列表
					} else {//省份为空时
						$("#customer_provincename").append($("<option selected value=''>" + "" + "</option>"));
						for (var i = 0; i < data.data.length; i++) {
							$("#customer_provincename").append($("<option value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
						}
						var province = $('#customer_provincename option:eq(0)').text();
						$("input[name='provincename']").attr("value", province);//选中的值
					}
					$('#customer_provincename').selectpicker('refresh');
					$('#customer_provincename').selectpicker('render');
				}
			});
		}
		/**
		 * 根据省份的code获取下面的城市
		 * **/
		function customer_getCity(id) {
			$("#customer_cityname").empty();
			$.ajax({
				url: "/v1/other/getcityarea?code=" + id,
				type: "GET",
				dataType: "json",
				success: function (data) {
					if (cityname != "") {
						for (var i = 0; i < data.data.length; i++) {
							if (data.data[i].cityname == cityname) {
								$("#customer_cityname").append($("<option selected value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
							} else {
								$("#customer_cityname").append($("<option value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
							}
						}
						var city = $('#customer_cityname option:selected').text();
						$("input[name='cityname']").attr("value", city);//选中的值

					} else {
						for (var i = 0; i < data.data.length; i++) {
							$("#customer_cityname").append($("<option value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
						}
						var city = $('#customer_cityname option:eq(0)').text();
						$("input[name='cityname']").attr("value", city);//选中的值
					}
					$('#customer_cityname').selectpicker('refresh');
					$('#customer_cityname').selectpicker('render');
					customer_getRegonal($('#customer_cityname option:selected').val());//省份列表获取成功后,获取省份列表
				}

			})
		}
		/**
		 * 获取区列表
		 * **/
		function customer_getRegonal(id) {
			$("#customer_districtname").empty();
			$.ajax({
				url: "/v1/other/getcityarea?code=" + id,
				type: "GET",
				dataType: "json",
				success: function (data) {
					if (cityname != "") {
						for (var i = 0; i < data.data.length; i++) {
							if (data.data[i].name == districtname) {
								$("#customer_districtname").append($("<option selected value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
							} else {
								$("#customer_districtname").append($("<option value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
							}
						}
						var city = $('#customer_districtname option:selected').text();
						$("input[name='districtname']").attr("value", city);//选中的值

					} else {
						for (var i = 0; i < data.data.length; i++) {
							$("#customer_districtname").append($("<option value=" + data.data[i].code + ">" + data.data[i].name + "</option>"));
						}
						var city = $('#customer_districtname option:eq(0)').text();
						$("input[name='districtname']").attr("value", city);//选中的值
					}
					$('#customer_districtname').selectpicker('refresh');
					$('#customer_districtname').selectpicker('render');
				}

			})
		}


		/**
		 * 保存后返回数据
		 */
		function saveCalback(json) {
			if (json.state == 200) { //保存成功
//                BJUI.dialog('closeCurrent',this);
				$('#customer_info').datagrid('refresh');
				$('#customer_list_tabel').datagrid('refresh');
				$('#customer_notes').datagrid('refresh');
				$('#complete_follow').datagrid('refresh');
				$(this).alertmsg('ok', '编辑成功');
			}else{
				$(this).alertmsg('warn', json.content);
			}
		}

		/**
		 * 选择省份
		 */
		$("#customer_provincename").change(function () {//选择省份
			var province = $('#customer_provincename option:selected').text();
			$("input[name='provincename']").attr("value", province);//选中的值
			customer_getCity($('#customer_provincename option:selected').val());//获取城市
		});
		/**
		 * 选择城市
		 * **/
		$("#customer_cityname").change(function () {
			var city = $('#customer_cityname option:selected').text();
			$("input[name='cityname']").attr("value", city);//选中的值
			customer_getRegonal($('#customer_cityname option:selected').val());
		})
		/**
		 * 选择省份
		 * **/
		$("#customer_districtname").change(function () {
			var districtname = $('#customer_districtname option:selected').text();
			$("input[name='districtname']").attr("value", districtname);//选中的值
		})

		/**
		 * 获取跟进记录详情
		 * */
		var followstate, followtype;
		function getFollowDetails() {
			var id = $.cookie("id");
			var selected = $("#customer_notes").find('tr.datagrid-selected-tr');

			if (selected.length == 0) {
				$(this).alertmsg('error', '请在列表中选择要操作的对象。');
			} else if (selected.length > 1) {
				$(this).alertmsg('error', '请选择唯一的操作对象。');
			} else {

				var datas = $("#customer_notes").data('selectedDatas');
				var a = selected[0].cells[0].innerText;
				var b = datas[0].createuserid;
				if (a != 1){
					$(this).alertmsg('error', '只能编辑第一行的内容.');
					return;
				}
				if (id != b){
					$(this).alertmsg('error', '只能录入人编辑');
					return;
				}

				$("#tcustomerid_fk").attr("value", $("#customer_id").val());
				$(this).dialog({id:'customer_follow_record_edit', url:'CustomerManagement/customer_follow_record_edit.html', title:'编辑',width:'1050',height:'400',mask:true});
			}
		}

		function customer_getFollowState() {
			$.ajax({
				url: "/v1/other/getfollowsate",
				type: "GET",
				dataType: "json",
				success: function (data) {
					if (followstate != "") { //跟进状态不为空时,调用跟进类型列表
						for (var i = 0; i < data.data.length; i++) {
							if (data.data[i].followtypename === followstate) {
								$("#followstate").append($("<option selected value=" + data.data[i].id + ">" + data.data[i].followtypename + "</option>"));
							} else {
								$("#followstate").append($("<option value=" + data.data[i].id + ">" + data.data[i].followtypename + "</option>"));
							}
						}
						var states = $('#followstate option:selected').text();
						$("input[name='followstate']").attr("value", states);//选中的值
						$("input[name='followstateid']").attr("value", $('#followstate option:selected').val());//选中的值
						customer_getFollowStype($('#followstate option:selected').val());
					} else {//省份为空时
						for (var i = 0; i < data.data.length; i++) {
							$("#customer_provincename").append($("<option value=" + data.data[i].id + ">" + data.data[i].followtypename + "</option>"));
						}
						var states = $('#followstate option:eq(0)').text();
						$("input[name='followstate']").attr("value", states);//选中的值
						$("input[name='followstateid']").attr("value", $("#followstate option:eq(0)").val());

						customer_getFollowStype($("#followstate option:eq(0)").val());
					}

				}
			});
		}

		//跟进类型
		function customer_getFollowStype(id) {
			$("#followtype").empty();
			$.ajax({
				url: "/v1/other/getfollowstype?id=" + id,
				type: "GET",
				dataType: "json",
				success: function (data) {
					if (followtype != "") {
						for (var i = 0; i < data.data.length; i++) {
							if (data.data[i].labelname == followtype) {
								$("#followtype").append($("<option selected value=" + data.data[i].id + ">" + data.data[i].labelname + "</option>"));
							} else {
								$("#followtype").append($("<option value=" + data.data[i].id + ">" + data.data[i].labelname + "</option>"));
							}
						}
						var type = $('#followtype option:selected').text();
						$("input[name='followtype']").attr("value", type);//选中的值
						$("input[name='followtypeid']").attr("value", $('#followtype option:selected').val());//选中的值
					} else {
						for (var i = 0; i < data.data.length; i++) {
							$("#followtype").append($("<option value=" + data.data[i].id + ">" + data.data[i].labelname + "</option>"));
						}
						var type = $('#followtype option:eq(0)').text();
						$("input[name='followtype']").attr("value", type);//选中的值
						$("input[name='followtypeid']").attr("value", $("#followtype option:eq(0)").val());
					}
				}
			})
		}
		;

		function customer_edit_changeValue(num) {
			setTimeout(function () {
				if (num == 3) {
					$('#customer_cash_table').datagrid('refresh');
				} else if (num == 4) {
					$('#customer_design_files').datagrid('refresh');
				} else if (num == 5){
					$('#customer_contract_table').datagrid('refresh');
				}else if(num == 9){
					$('#customer_edit_netsale_tabel').datagrid('refresh');
				}
			}, 300);
		}


		$(function () {
			var roleid = $.cookie("roleid");
			if (roleid == '5'){
				$('#customer_source').removeAttr("disabled");
			}
		});

	</script>
</head>
<body>
<div class="bjui-pageContent" id="customer_info">
	<form action="/v1/customer/customer_reset" data-toggle="validate"
		  data-callback="saveCalback">
		<input type="hidden" value="" name="sourceid">
		<input type="hidden" value="" name="source">
		<input type="hidden" value="" name="provincename">
		<input type="hidden" value="" name="cityname">
		<input type="hidden" value="" name="districtname">
		<input type="hidden" value="" id="customer_id" name="id">
		<table class="table table-condensed table-hover" width="100%">
			<tbody>
			<tr>
				<td><label for="first_title" class="control-label" style="font-size:18px;">客户基本信息</label></td>
			</tr>
			<tr>
				<td>
					<label for="customer_customercode" class="control-label x80">编码：</label>
					<input type="text" id="customer_customercode" value="" size="15"
						   readonly="true">
				</td>
				<td>
					<label for="customer_state" class="control-label x80">跟进状态：</label>
					<input type="text" id="customer_state" value="" size="15" name="state" readonly="true">
				</td>
				<td>
					<label for="customer_mobilesales" class="control-label x80">美聊员：</label>
					<input type="text" id="customer_mobilesales" value="" size="15" readonly="true">
				</td>
				<td>
					<label for="customer_custsales" class="control-label x80">客户经理：</label>
					<input type="text" id="customer_custsales" value="" size="15" readonly="true">
				</td>
			</tr>
			<tr>
				<!--<td>-->
					<!--<label for="customer_orgname" class="control-label x80">组织：</label>-->
					<!--<input type="text" id="customer_orgname" value="" size="15" readonly="true">-->
				<!--</td>-->
				<!--<td>-->
				<!--<label for="customer_stores" class="control-label x80">门店：</label>-->
				<!--<input type="text" id="customer_stores" value="" size="15" name="stores" readonly="true">-->
				<!--</td>-->
				<td>
					<label for="customer_cusname" class="control-label x80"><a style="color: red">*</a>姓名：</label>
					<input type="text" id="customer_cusname" name="cusname" value="" size="15" data-rule="required">
				</td>
				<td>
					<label for="customer_mobile" class="control-label x80"><a style="color: red">*</a>手机号：</label>
					<input type="text" id="customer_mobile" name="mobile" value="" size="15" data-rule="required;mobile">
				</td>
				<td>
					<label for="customer_custusername" class="control-label x80">用户名：</label>
					<input type="text" id="customer_custusername" value="" size="15"
						   readonly="true">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">设计师：</label>
					<input type="text" id="customer_designer" value="" size="15" readonly="true">
				</td>
			</tr>
			<tr>
				<td>
					<label for="customer_source" class="control-label x80"><a style="color: red">*</a>来源：</label>
					<select id="customer_source" data-toggle="selectpicker" data-rule="required" disabled>
						<option value=""></option>
					</select>
				</td>
				<td>
					<label for="customer_secondsource" class="control-label x80">二级来源：</label>
					<input type="text" id="customer_secondsource" name="secondsource" value="" size="15">
				</td>

				<td>
					<label for="customer_thirdsource" class="control-label x80">活动类型：</label>
					<input type="text" id="customer_thirdsource" name="thirdsource" value="" size="15">
				</td>

				<td>
					<label for="customer_wechatnum" class="control-label x80">微信号：</label>
					<input type="text" id="customer_wechatnum" value="" size="15" name="wechatnum">
				</td>

			</tr>
			<tr>
				<td>
					<label for="customer_provincename" class="control-label x80">省：</label>
					<select id="customer_provincename" data-toggle="selectpicker"></select>
				</td>
				<td>
					<label for="customer_cityname" class="control-label x80">城市：</label>
					<select id="customer_cityname" style="width: 150px" data-toggle="selectpicker"></select>
				</td>
				<td>
					<label for="customer_districtname" class="control-label x80">区：</label>
					<select id="customer_districtname" style="width: 150px" data-toggle="selectpicker"></select>
				</td>
				<td>
					<label for="customer_road" class="control-label x80">街道：</label>
					<input type="text" id="customer_road" value="" size="15" name="road">
				</td>
			</tr>
			<tr>
				<td>
					<label for="customer_village" class="control-label x80">小区名称：</label>
					<input type="text" id="customer_village" value="" size="15" name="village">
				</td>
				<td>
					<label for="customer_building" class="control-label x80">栋数：</label>
					<input type="text" id="customer_building" value="" size="15" name="building">
				</td>
				<td>
					<label for="customer_unit" class="control-label x60">单元：</label>
					<input type="text" id="customer_unit" value="" size="7" name="unit">

					<label for="customer_room" class="control-label x50">房号：</label>
					<input type="text" id="customer_room" value="" size="7" name="room">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">面积：</label>
					<input type="text" id="customer_area" value="" size="15" name="area" data-rule="number"
						   placeholder="00.00">
				</td>
			</tr>
			<tr>
				<td>
					<label for="customer_rooms" class="control-label x80">室：</label>
					<input type="text" id="customer_rooms" value="" size="15" name="rooms" data-rule="digits">
				</td>
				<td>
					<label for="customer_hall" class="control-label x80">厅：</label>
					<input type="text" id="customer_hall" value="" size="15" name="hall" data-rule="digits">
				</td>
				<td>
					<label for="customer_toilet" class="control-label x80">卫：</label>
					<input type="text" id="customer_toilet" value="" size="15" name="toilet" data-rule="digits">
				</td>
				<td>
					<label for="customer_balcony" class="control-label x80">阳台：</label>
					<input type="text" id="customer_balcony" value="" size="15" name="balcony" data-rule="digits">
				</td>
			</tr>

			<tr>
				<td>
					<label for="customer_roomstatus" class="control-label x80">交房状态：</label>
					<select name="roomstatus" id="customer_roomstatus" data-toggle="selectpicker" >
						<option value=""></option>
						<option value="待购">待购</option>
						<option value="现房">现房</option>
						<option value="期房">期房</option>
					</select>
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">交房时间：</label>
					<input type="text" id="customer_handoverdate" value="" size="15" name="handoverdate"
						   data-toggle="datepicker" data-rule="date" data-pattern="yyyy-MM-dd">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">计划装修时间：</label>
					<input type="text" id="customer_decorationdate" value="" size="15" name="decorationdate"
						   data-toggle="datepicker" data-rule="date" data-pattern="yyyy-MM-dd">
				</td>
				<td>
					<label for="customer_decoratestate" class="control-label x80">装修状态：</label>
					<select name="decoratestate" id="customer_decoratestate" data-toggle="selectpicker" >
						<option value=""></option>
						<option value="毛坯">毛坯</option>
						<option value="旧房">旧房</option>
					</select>
				</td>
			</tr>

			<tr>
				<td>
					<label for="customer_roommodel" class="control-label x80">房型：</label>
					<select name="roommodel" id="customer_roommodel" data-toggle="selectpicker" >
						<option value=""></option>
						<option value="平层">平层</option>
						<option value="复式">复式</option>
						<option value="别墅">别墅</option>
						<option value="排屋">排屋</option>
					</select>
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">关注点：</label>
					<input type="text" id="customer_concerns" value="" size="15" name="concerns">
				</td>
				<td>
					<label for="customer_person" class="control-label x80">个性化：</label>
					<input type="text" id="customer_person" value="" size="15" name="person">
				</td>
				<td>
					<label for="customer_intention" class="control-label x80">意向度：</label>
					<select name="intention" id="customer_intention" data-toggle="selectpicker" >
						<option value=""></option>
						<option value="30%">30%</option>
						<option value="50%">50%</option>
						<option value="70%">70%</option>
						<option value="80%">80%</option>
						<option value="90%">90%</option>
						<option value="100%">100%</option>
					</select>
				</td>
			</tr>

			<tr>
				<td>
					<label for="customer_designer" class="control-label x80">量房时间：</label>
					<input type="text" id="customer_scaledate" value="" size="15" data-toggle="datepicker"
						   name="scaledate" data-rule="date" data-pattern="yyyy-MM-dd">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">量房时间段：</label>
					<input type="text" id="customer_scaletime" value="" size="15" name="scaletime">
				</td>
				<td>
					<label for="customer_sex" class="control-label x80">性别：</label>
					<select name="sex" id="customer_sex" data-toggle="selectpicker" >
						<option value=""></option>
						<option value="男">男</option>
						<option value="女">女</option>
					</select>
				</td>
				<!--<td>-->
					<!--<label for="customer_cuscall" class="control-label x80">称呼：</label>-->
					<!--<input type="text" id="customer_cuscall" name="cuscall" value="" size="15">-->
				<!--</td>-->
				<td>
					<label for="customer_plandate" class="control-label x80">方案初稿日期：</label>
					<input type="text" id="customer_plandate" value="" size="15" data-toggle="datepicker"
						   name="plandate" data-rule="date" data-pattern="yyyy-MM-dd">
				</td>
			</tr>
			<tr>
				<td>
					<label for="customer_mobiletwo" class="control-label x80">手机号2：</label>
					<input type="text" id="customer_mobiletwo" value="" size="15" name="mobiletwo" data-rule="mobile">
				</td>
				<td colspan="2">
					<label for="customer_details" class="control-label x80">备注：</label>
					<textarea type="text" id="customer_details" value="" size="15" name="details" cols="60" rows="1"
							  style="resize:none"></textarea>
				</td>
				<td>
					<label for="customer_isplan" class="control-label x80">方案是否确认：</label>
					<select name="isplan" id="customer_isplan" data-toggle="selectpicker" >
						<option value=""></option>
						<option value="是">是</option>
						<option value="否">否</option>
					</select>
				</td>
			</tr>
			<tr>
				<td><label for="second_title" class="control-label" style="font-size:18px;">提高成功率</label></td>
			</tr>
			<tr>
				<td>
					<label for="customer_designer" class="control-label x80">推荐人：</label>
					<input type="text" id="customer_reccustomername" value="" size="15" name="reccustomername">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">预算金额：</label>
					<input type="text" id="customer_budget" value="" size="15" name="budget" data-rule="number"
						   placeholder="00.00">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">已谈赠品：</label>
					<input type="text" id="customer_discount" value="" size="15" name="discount">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">喜欢的风格：</label>
					<input type="text" id="customer_likestyle" value="" size="15" name="likestyle">
				</td>
			</tr>
			<tr>
				<td>
					<label for="customer_designer" class="control-label x80">竞品情况：</label>
					<input type="text" id="customer_rival" value="" size="15" name="rival">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">用途：</label>
					<input type="text" id="customer_cususe" value="" size="15" name="cususe">
				</td>

				<td>
					<label for="customer_age" class="control-label x80">年龄：</label>
					<input type="text" id="customer_age" value="" size="15" name="age" data-rule="digits">
				</td>
				<td>
					<label for="customer_child" class="control-label x80">孩子：</label>
					<input type="text" id="customer_child" value="" size="15" name="child">
				</td>
			</tr>
			<tr>
				<td><label for="third_title" class="control-label" style="font-size:18px;">1比4内容</label></td>
			</tr>
			<tr>
				<td>
					<label for="customer_designer" class="control-label x80">单位/职业：</label>
					<input type="text" id="customer_occupation" value="" size="15" name="occupation">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">生日：</label>
					<input type="text" id="customer_birthday" value="" size="15" data-toggle="datepicker"
						   name="birthday" data-rule="date" data-pattern="yyyy-MM-dd">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">乔迁日：</label>
					<input type="text" id="customer_movedate" value="" size="15" data-toggle="datepicker"
						   name="movedate" data-rule="date" data-pattern="yyyy-MM-dd">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">兴趣爱好：</label>
					<input type="text" id="customer_interests" value="" size="15" name="interests">
				</td>
			</tr>
			<tr>
				<td>
					<label for="customer_designer" class="control-label x80">车辆：</label>
					<input type="text" id="customer_car" value="" size="15" name="car">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">多套房情况：</label>
					<input type="text" id="customer_multhouse" value="" size="15" name="multhouse">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">籍贯：</label>
					<input type="text" id="customer_nativeplace" value="" size="15" name="nativeplace">
				</td>
				<td>
					<label for="customer_designer" class="control-label x80">毕业学校：</label>
					<input type="text" id="customer_school" value="" size="15" name="school">
				</td>
			</tr>

			</tbody>
		</table>
	</form>

	<div id="bjui bjui-sidebar" style="margin-top: 10px">
		<div class="page unitBox">
			<ul class="nav nav-tabs" role="tablist">
				<li class="active in"><a style="font-size: 13px" href="#notes" role="tab" data-toggle="tab" data-target="#notes">跟进记录</a></li>
				<li><a style="font-size: 13px" href="CustomerManagement/customer_cash.html" role="tab" data-toggle="ajaxtab"
					   data-target="#messages" data-reload="false" onclick="customer_edit_changeValue(3)">收款信息</a></li>

				<li><a style="font-size: 13px" href="CustomerManagement/customer_design_file.html" role="tab" data-toggle="ajaxtab"
					   data-target="#design_files" data-reload="false" onclick="customer_edit_changeValue(4)">设计文件</a>
				</li>
				<li><a style="font-size: 13px" href="CustomerManagement/customer_contract_data.html" role="tab" data-toggle="ajaxtab"
					   data-target="#contract" data-reload="false" onclick="customer_edit_changeValue(5)">合同信息</a></li>
				<li><a style="font-size: 13px" href="#orders" role="tab" data-toggle="tab">订单信息</a></li>
				<li><a style="font-size: 13px" href="#setting" role="tab" data-toggle="tab">操作记录</a></li>
				<li><a style="font-size: 13px" href="#remind" role="tab" data-toggle="tab">提醒记录</a></li>

				<li><a style="font-size: 13px" href="CustomerManagement/customer_edit_netsale_table.html" role="tab" data-toggle="ajaxtab"
					   data-target="#netsale" data-reload="false" onclick="customer_edit_changeValue(9)">活动报名记录</a></li>
			</ul>

			<div class="tab-content">
				<div class="tab-pane fade active in" id="notes">
					<form action="" data-toggle="validate" id="notes_list" class="pageForm nice-validator n-red"
						  novalidate="novalidate">
						<div style="margin-bottom:10px;">
						<button type="button" class="btn btn-blue" data-icon="plus"
								data-url="CustomerManagement/customer_follow_record_add.html"
								data-height="422"
								data-toggle="dialog"
								data-id="customer_follow"
								data-mask="true"><i class="fa fa-plus"></i>添加
						</button>
						<button type="button" class="btn btn-green"
								data-icon="edit" onclick="getFollowDetails()"><i class="fa fa-edit"></i> 编辑
						</button>
						</div>
						<table class="table table-bordered table-hover table-striped table-top" id="customer_notes"
							   data-width="100%" data-initnum="0" data-single-noindex="true" data-toggle="tabledit">
						</table>
					</form>
				</div>
				<div class="tab-pane fade" id="profile"></div>
				<div class="tab-pane fade" id="messages"></div>
				<div class="tab-pane fade" id="design_files"></div>
				<div class="tab-pane fade" id="contract"></div>
				<div class="tab-pane fade" id="orders"></div>
				<div class="tab-pane fade" id="setting"></div>
				<div class="tab-pane fade" id="remind"></div>
				<div class="tab-pane fade" id="netsale"></div>
			</div>
		</div>
		<!-- 各页片内容区域 -->
	</div>
</div>

<div class="bjui-pageFooter">
	<ul>

		<li>
			<button type="button" class="btn-close" data-icon="close">取消</button>
		</li>
		<li>
			<button type="submit" class="btn-default" data-icon="save">保存</button>
		</li>
		<!--<li><button type="button" class="btn-default hide" data-icon="user" data-url="CustomerManagement/customer_to_design.html"-->
		<!--data-mask="true" data-toggle="dialog" data-id="customer_edit_design" data-width="1050" data-height="400" id="customer_design">转设计</button></li>-->
		<!--<li><button type="button" class="btn-default hide" data-icon="user" data-url="CustomerManagement/customer_to_sale.html"-->
		<!--data-mask="true" data-toggle="dialog" data-id="customer_edit_sale" data-width="1050" data-height="400" id="customer_sale">转销售</button></li>-->
		<!--<li><button type="button" class="btn-default hide" data-icon="user" data-url="CustomerManagement/customer_to_electric.html"-->
		<!--data-mask="true" data-toggle="dialog" data-id="customer_edit_electric" data-width="1050" data-height="400" id="customer_electric">转电销</button></li>-->
	</ul>
</div>
</body>
</html>
