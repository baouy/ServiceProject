<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript">
//        $('table - selector').data('selectedTrs');
//        $('#customer_design_files').data('selectedTrs')[0].cells[8].innerText;
        var select_which = "";
        var enter = $(".navtab-tab .active").children("a").attr("title");//判断是哪个菜单列表进入的
        switch (enter) {
            case "目标客户档案":
                select_which = $("#customer_list_tabel").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                break;
            case "客户档案(电销)":
                if($("#btn_list .active").children("a").text() == "需跟进客户") {
                    select_which = $("#customer_telephonesales_1").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                } else if($("#btn_list .active").children("a").text() == "已转销售"){
                    select_which = $("#customer_telephonesales_2").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                } else if($("#btn_list .active").children("a").text() == "回收池"){
                    select_which = $("#customer_telephonesales_3").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                } else if($("#btn_list .active").children("a").text() == "新客户"){
                    select_which = $("#customer_telephonesales").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                }
                break;
            case "客户档案(销售)":
                if($("#customer_sale_menuTab .active").children("a").text()=="销售跟进"){
                    select_which = $("#customer_sales").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                }else if($("#customer_sale_menuTab .active").children("a").text()=="已成交"){
                    select_which = $("#customer_sales_2").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                }else if($("#customer_sale_menuTab .active").children("a").text()=="回收池"){
                    select_which = $("#customer_sales_3").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                }
                break;
            case "客户档案(设计)":
                if($("#customer_design_menuTab .active").children("a").text()=="设计跟进"){
                    select_which = $("#customer_designList").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                }else if($("#customer_sale_menuTab .active").children("a").text()=="回收池"){
                    select_which = $("#customer_recycleList").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                }
                break;
            case "客户档案(前台)":
                select_which = $("#customer_reception_list").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                break;
            case "成交跟进":
                select_which = $("#complete_follow").find('tr.datagrid-selected-tr')[0].lastChild.innerText;
                break;
            default:
                break
        }

        $('#customer_cash_table').datagrid({
            local: 'remote',
            dataUrl: '/v1/financial/customer_voucherlist?custid_fk='+select_which,
            dataType: 'json',
            sortAll: false,
            loadType: 'get',
            filterAll: true,
			height:'95%',
            columns: [
                {name: 'businessdate', width: '100', label: '收款日期'},
                {name: 'invoicedoc', width: '120', label: '收款单号'},
                {name: 'paymentmethods', width: '80', label: '收款方式'},
                {name: 'paymentamount', width: '100', label: '收款金额'},
                {name: 'paymenttype', width: '80', label: '收款类型'},
                {name: 'agreementdoc', width: '80', label: '定金协议号'},
                {name: 'state', width: '80', label: '单据状态'},
                {name: 'createuser', width: '70', label: '创建人'},
                {name: 'projectmanager', width: '80', label: '排雷人员'},
                {name: 'details', width: '150', label: '备注'},
                {name: 'id', width: '80', label: '主键', hide: true}
            ],
            templateWidth: 600,
            showLinenumber: true,
            paging: {pageSize: 50, selectPageSize: '50,100,200', pageCurrent: 1},
            columnMenu: true,
            columnShowhide: true,
            columnFilter: true,
            columnLock: false,
            fullGrid: false,

        });

    </script>
</head>
<body>
<div class="bjui-pageContent">
    <table class="table table-hover" data-width="100%" id="customer_cash_table">
    </table>
</div>
</body>
</html>