<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript">
        $('#customer_designList').datagrid({

            local: 'remote',
            dataUrl: '/v1/customer/customer_desingerlist?type=9',
            dataType: 'json',
            sortAll: false,
            loadType: 'get',
            filterAll: true,
			height:'95%',
            columns: [{name: 'customercode', width: '150', label: '编码'},
                {name: 'cusname', width: '150', label: '姓名'},
                {name: 'mobile', width: '150', label: '手机号'},
                {name: 'cityname', width: '150', label: '城市'},
                {name: 'community', width: '150', label: '小区名称'},
                {name: 'scaledate', width: '150', label: '量房日期'},
                {name: 'scaletime', width: '150', label: '量房时间'},
                {name: 'custsales', width: '150', label: '客户经理'},
                {name: 'designer', width: '150', label: '设计师'},
                {name: 'followstate', width: '150', label: '跟进状态'},
                {name: 'followtype', width: '150', label: '跟进类型'},
                {name: 'id', width: '80', label: '主键', hide: true}],
            paging: {pageSize: 50, selectPageSize: '50,100,200', pageCurrent: 1},
            columnMenu: true,
            columnShowhide: true,
            columnFilter: true,
            columnLock: false,
            fullGrid: false,
            dblOnClick: 'designTableSelect1',

//    showEditbtnscol: true,//是否显示编辑按钮列。
//    editUrl:'/v1/customer/customerlist', //保存编辑、添加数据的url
        });

        function designTableSelect(dialogId,tableId,title,toPage){
            var selected = $("#"+tableId).find('tr.datagrid-selected-tr');
            if(selected.length == 0){
                $(this).alertmsg('error', '请在列表中选择要操作的对象。');
            }else {
                $(this).dialog({
                    id:"customer_"+dialogId,
                    title:title,
                    url:"CustomerManagement/"+toPage,
                    width:1800,
                    height:900,
                    mask:true
                });
            }
        }

        function designTableSelect1(){
            var selected = $("#customer_designList").find('tr.datagrid-selected-tr');
            if(selected.length == 0){
                $(this).alertmsg('error', '请在列表中选择要操作的对象。');
            }else {
                $(this).dialog({
                    id:"customer_designList",
                    title:"跟进",
                    url:"CustomerManagement/customer_edit.html",
                    width:1800,
                    height:900,
                    mask:true
                });
            }
        }

        function designTableSelect3(){
            var selected = $("#customer_recycleList").find('tr.datagrid-selected-tr');
            if(selected.length == 0){
                $(this).alertmsg('error', '请在列表中选择要操作的对象。');
            }else {
                $(this).dialog({
                    id:"customer_recycleList",
                    title:"跟进",
                    url:"CustomerManagement/customer_edit.html",
                    width:1800,
                    height:900,
                    mask:true
                });
            }
        }

    </script>
</head>
<body>
<div class="bjui-pageContent" style="height: 100%">
    <ul class="nav nav-tabs" role="tablist" id="customer_design_menuTab">
        <li class="active">
            <a style="font-size: 13px" href="#customer_designpage_follow" role="tab" data-toggle="tab" >设计跟进</a>
        </li>
        <li>
            <a style="font-size: 13px" href="CustomerManagement/customer_design_1.html" role="tab" data-toggle="ajaxtab" data-target="#customer_designpage_traded" >已成交</a>
        </li>
        <li>
            <a style="font-size: 13px" href="CustomerManagement/customer_design_2.html" role="tab" data-toggle="ajaxtab" data-target="#customer_designpage_recyclepool">回收池</a>
        </li>
    </ul>
    <div class="tab-content" style="height: 95%">
        <div class="tab-pane fade active in" id="customer_designpage_follow"  style="height: 100%;">
            <div style="margin-bottom:10px;">
                <button type="button" class="btn btn-green" data-icon="edit" onclick="designTableSelect('design_edit','customer_designList','跟进','customer_edit.html')">跟进</button>
                <button type="button" class="btn btn-green" data-icon="file-o" data-url="CustomerManagement/customer_design_orderentry.html" data-width="1050" data-height="400" data-toggle="dialog" data-id="customer_design_add" data-mask="true">录入订单</button>
            </div>
            <table id="customer_designList" class="table table-hover" data-width="100%"> </table>
        </div>
        <div class="tab-pane fade" id="customer_designpage_traded" style="height: 100%;">

        </div>
        <div class="tab-pane fade" id="customer_designpage_recyclepool" style="height: 100%;">

        </div>

    </div>

</div>
</body>
</html>