<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript">

        $('#activtype_list').datagrid({
            local: 'remote',
            dataUrl: '/v1/customer/activtype_list',
            dataType: 'json',
            sortAll: false,
            loadType: 'get',
            filterAll: true,
            height:'95%',
            columns: [
                {name: 'type', width: '120', label: '来源'},
                {name: 'activname', width: '100', label: '活动页'},
                {name: 'activnewname', width: '60', label: '活动名称'},
            ],
            paging: {pageSize: 50, selectPageSize: '50,100,200', pageCurrent: 1},
            columnMenu: true,
            columnShowhide: true,
            columnFilter: true,
            columnLock: false,
            fullGrid: false,
            dblOnClick:'db_onclick',
        });

        function db_onclick() {
            $('#selected').click()
        }


        function personnel_user_select(){
            var datas = $("#activtype_list").data('selectedDatas');
            if(datas.length == 0){
                $(this).alertmsg('error', '请在列表中选择要操作的对象。');
            }else if(datas.length > 1){
                $(this).alertmsg('error', '请选择唯一的操作对象。');
            }else {
                var type = datas[0].type;
                var activname = datas[0].activname;
                var activnewname = datas[0].activnewname;
                var data = '{type:\"'+type+'\",activname:\"'+activname+'\",activnewname:\"'+activnewname+'\"}';
                $('#selected').attr("data-args",data);
            }
        }

    </script>
</head>

<body>
<div class="bjui-pageContent" id="materialsTable">
    <div style="margin-bottom:15px;" id="purchase_materials_btn">
        <a href="javascript:;" data-toggle="lookupback" onclick="personnel_user_select()" class="btn btn-blue" data-args="" title="选择本项" data-icon="check" id="selected"><i class="fa fa-check"></i> 选择</a>
        <button type="button" class="btn-close btn" data-icon="close"><i class="fa fa-close"></i> 关闭</button>
    </div>
    <table id="activtype_list">

    </table>
</div>
</body>

</html>