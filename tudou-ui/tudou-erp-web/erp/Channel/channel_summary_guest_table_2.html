<script>

	$('#channel_summary_h_f_g').val(h_f_g_data);
	$('#channel_summary_e_f_g').val(e_f_g_data);

	$('#channel_summary_guest_table').datagrid({
		local: 'remote',
		dataUrl: '/v1/summary/channel_guest_list?hcreatetime=' + h_f_g_data + '&ecreatetime=' + e_f_g_data,
		dataType: 'json',
		loadType: 'get',
		height: '95%',
		filterThead: false,
		columns: [{name: 'qdy', width: '80', label: '美客'},
			{name: 'bm', width: '80', label: '报名', calc: 'sum', calcTit: '合计'},
			{name: 'hf', width: '80', label: '回访', calc: 'sum', calcTit: '合计'},
			{name: 'yx', width: '80', label: '意向', calc: 'sum', calcTit: '合计'},
			{name: 'ufo', width: '80', label: 'UFO用户', calc: 'sum', calcTit: '合计'},
			{name: 'yushou', width: '80', label: '102预售', calc: 'sum', calcTit: '合计'},
			{name: 'ufoyushou', width: '90', label: 'UFO用户和102预售', calc: 'sum', calcTit: '合计'},
			{name: 'yy', width: '80', label: '邀约', calc: 'sum', calcTit: '合计'},
			{name: 'hddc', width: '80', label: '活动到场', calc: 'sum', calcTit: '合计'},
			{name: 'sk', width: '80', label: '散客', calc: 'sum', calcTit: '合计'},
			{name: 'dczs', width: '80', label: '到场总数', calc: 'sum', calcTit: '合计'},
			{name: 'ljcj', width: '80', label: '累计成交(不含退订)', calc: 'sum', calcTit: '合计'},
			{name: 'td', width: '80', label: '退订', calc: 'sum', calcTit: '合计'},
			{name: 'cjzj', width: '80', label: '成交总计(含退订)', calc: 'sum', calcTit: '合计'},
			{
				name: 'yxdcl', width: '80', label: '意向到场率', calc: 'avg', calcTit: '平均', render: function (value) {
				if (value > 0) {
					value += '%'
				} else {
					value = '0%'
				}
				return value;
			}
			},
			{
				name: 'skl', width: '80', label: '锁客率', calc: 'avg', calcTit: '平均', render: function (value) {
				if (value > 0) {
					value += '%'
				} else {
					value = '0%'
				}
				return value;
			}
			},
			{name: 'yinshuol', width: '80', label: '银锁量', calc: 'sum', calcTit: '合计'},
			{name: 'sjdj', width: '80', label: '实收定金额', calc: 'sum', calcTit: '合计'},
			{name: 'cql', width: '80', label: '草签量', calc: 'sum', calcTit: '合计'},
			{name: 'htl', width: '80', label: '合同量', calc: 'sum', calcTit: '合计'},
			{name: 'ssht', width: '80', label: '实收可同额(万元)', calc: 'sum', calcTit: '合计'},
			{name: 'ssxj', width: '80', label: '实收现金额(万元)', calc: 'sum', calcTit: '合计'},

		],
		columnMenu: true,
		columnShowhide: true,
		columnFilter: true,
		columnLock: false,
		fullGrid: false,
		showTfoot: true,
		paging: false,
//		showLinenumber: false,
	});

	function select_summary_guest_detail_data() {
		h_f_g_data = $('#channel_summary_h_f_d').val()
		e_f_g_data = $('#channel_summary_e_f_d').val()
		$(this).bjuiajax('doLoad', {
			url: 'Channel/channel_summary_guest_table_2.html',
			target: '#channel_summary_guest_layout',
			loadingmask: true
		});

	}

	function clear_summary_guest_detail_data() {
		h_b_d_data = ''
		e_b_d_data = ''
		h_f_d_data = ''
		e_f_d_data = ''
		$('#channel_summary_h_f_g').val('');
		$('#channel_summary_e_f_g').val('');
		$(this).bjuiajax('doLoad', {
			url: 'Channel/channel_summary_guest_table_2.html',
			target: '#channel_summary_guest_layout',
			loadingmask: true
		});
	}


</script>

<div class="bjui-pageContent">
	<div style="margin:0px 0px 10px 0px;">

		<label class="control-label">按报名日期查询：</label>
		<input type="text" id="channel_summary_h_f_g" data-toggle="datepicker" size="15" class="form-control"
			   aria-required="true" style="width: 80px;">
		<label class="control-label">—</label>
		<input type="text" id="channel_summary_e_f_g" data-toggle="datepicker" size="15" class="form-control"
			   aria-required="true" style="width: 80px;">


		<button type="button" class="btn btn-green" onclick="select_summary_guest_detail_data()"><i class="fa fa-edit"></i>查询
		</button>

		<button type="button" class="btn btn-green" onclick="clear_summary_guest_detail_data()"><i class="fa fa-edit"></i>刷新
		</button>
	</div>


	<table id="channel_summary_guest_table" class="table table-hover" data-width="80%"></table>
</div>