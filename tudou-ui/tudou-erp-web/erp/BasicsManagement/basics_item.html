<script>

	var item_list_id;

	$('#item_list_datagrid').datagrid({

		local: 'remote',
		dataUrl: '/v1/titem/list',
		dataType: 'json',
		sortAll: false,
		loadType: 'get',
		filterAll: true,
		height:'95%',
		columns: [{name:'itemclass', width:'150', label:'分类'},
			{name:'itemno', width:'150', label:'料号（SKU）'},
			{name:'partname', width:'150', label:'品名'},
			{name:'partspec', width:'150', label:'规格'},
			{name:'partstyle', width:'150', label:'型号'},
			{name:'funit', width:'150', label:'单位'},
			{name:'brand', width:'150', label:'品牌'},
			{name:'usingphase', width:'150', label:'使用阶段'},
			{name:'isactive', type:'select',items:[{'true':'有效'}, {'false':'无效'}], width:'80', label:'是否有效'},
			{name:'createuser', width:'150', label:'创建人'},
			{name:'createtime', width:'150', label:'创建时间'},
			{name:'lastuser', width:'150', label:'最后修改人'},
			{name:'lasttime', width:'150', label:'最后修改时间'}
		],
		paging: {pageSize:50, selectPageSize:'50,100,200', pageCurrent:1},
		hiddenFields: ['id'],
		columnMenu: true,
		columnShowhide: true,
		columnFilter: true,
		columnLock: false,
		fullGrid: true,
		dblOnClick: 'item_list_edit',
	});
	
	
	function item_list_edit() {
		var selected=$("#item_list_datagrid").data('selectedDatas');
		if(selected.length == 0){
			$(this).alertmsg('error', '请在列表中选择要操作的对象。');
		}else if(selected.length > 1){
			$(this).alertmsg('error', '请选择唯一的操作对象。');
		}else {
			item_list_id = selected[0].id;
			$(this).dialog({
				id: 'basics_item_supplier_edit',
				url: 'BasicsManagement/basics_item_supplier_edit.html',
				title: '编辑',
				width: '1200',
				height: '800',
				mask: true
			});
		}
	}
	
</script>

<div class="bjui-pageContent">
	<div style="margin:0px 0px 10px 0px;">
		<button type="button" class="btn btn-blue" data-icon="plus" data-url="BasicsManagement/basics_item_supplier_new.html" data-toggle="dialog" data-id="personnel_n" data-mask="true" data-width="1200" data-height="800"><i class="fa fa-plus"></i>新增
		</button>
		<button type="button" class="btn btn-green" data-icon="edit" onclick="item_list_edit()" id="customer_edit"><i class="fa fa-edit"></i>编辑</button>
	</div>

	<table id="item_list_datagrid" class="table table-hover" data-width="100%"> </table>
</div>
