<html>

<head>
    <script type="text/javascript">

        $('#tsalespackage_list_datagrid').datagrid({

            local: 'remote',
            dataUrl: '/v1/SalesPackage/list',
            dataType: 'json',
            sortAll: false,
            loadType: 'get',
            filterAll: true,
            height:'95%',
            columns: [{name:'salespackagecode', width:'150', label:'编码'},
                {name:'salespackagename', width:'150', label:'名称'},
                {name:'isactive', type:'select',items:[{'true':'有效'}, {'false':'无效'}], width:'80', label:'是否有效'},
                {name:'typedocument', width:'150', label:'类型'},
                {name:'createuser', width:'150', label:'创建人'},
                {name:'createtime', width:'150', label:'创建时间'},
                {name:'lastuser', width:'150', label:'最后修改人'},
                {name:'lasttime', width:'150', label:'最后修改时间'},
            ],
            paging: {pageSize:20, selectPageSize:'50,80', pageCurrent:1},
            hiddenFields: ['id'],
            fullGrid: true,
            dblOnClick: 'tsalespackage_checkDialog',
        });


        var salespackage_id;
        function tsalespackage_checkDialog(){
            var selected = $("#tsalespackage_list_datagrid").data('selectedDatas');
            if(selected.length == 0){
                $(this).alertmsg('error', '请在列表中选择要操作的对象。');
            }else if(selected.length > 1){
                $(this).alertmsg('error', '请选择唯一的操作对象。');
            }else {
                salespackage_id = selected[0].id;
                $(this).dialog({
                    id:"basics_salespackage_edit",
                    title:"套餐档案编辑",
                    url:"BasicsManagement/basics_salespackage_edit.html",
                    width:1000,
                    height:600,
                    mask:true
                });
            }
        }
    </script>
</head>

<body>
<div class="bjui-pageContent">
    <div style="margin:0px 0px 10px 0px;">
        <button type="button" class="btn btn-blue" data-icon="plus" data-url="BasicsManagement/basics_salespackage_new.html" data-toggle="dialog" data-id="personnel_n" data-mask="true" data-width="1000" data-height="600"><i class="fa fa-plus"></i>新增
        </button>
        <button type="button" class="btn btn-green" data-icon="edit" onclick="tsalespackage_checkDialog()" id="customer_edit"><i class="fa fa-edit"></i>编辑</button>
    </div>
    <table id="tsalespackage_list_datagrid" class="table table-hover" data-width="100%"> </table>
</div>
</body>

</html>