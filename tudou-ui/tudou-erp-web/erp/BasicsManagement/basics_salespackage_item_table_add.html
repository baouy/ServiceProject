<script type="text/javascript">

	$('#basics_salespackage_item_table_datagrid').datagrid({

		local: 'remote',
		dataUrl: '/v1/titem/item_list',
		dataType: 'json',
		sortAll: false,
		loadType: 'get',
		filterAll: true,
		height:'90%',
		columns: [
			{name:'itemno', width:'150', label:'料号'},
			{name:'partname', width:'150', label:'品名'},
			{name:'partspec', width:'150', label:'规格'},
			{name:'isactive', items:[{'true':'有效'}, {'false':'无效'}], width:'80', label:'是否有效'},
		],
		hiddenFields: ['id','itemclass','partname','partspec','partstyle','funit','usingphase','brand','material','isnonstandard','colorlevel'],
		paging: {pageSize:50, selectPageSize:'50,100,200', pageCurrent:1},
		fullGrid: true,
		dblOnClick:'db_onclick',
	});
	
	function db_onclick() {
		$('#choose_salespackage_item').click()
	}

	function selecttdlItems(){
		var selected=$("#basics_salespackage_item_table_datagrid").data('selectedDatas');
		if(selected.length == 0){
			$(this).alertmsg('error', '请在列表中选择要操作的对象。');
		}else if(selected.length > 1){
			$(this).alertmsg('error', '请选择唯一的操作对象。');
		}else{
			var itemno = "'"+selected[0].itemno+"'";
			var id = selected[0].id;
			var itemclass = "'"+selected[0].itemclass+"'";
			var partname = "'"+selected[0].partname+"'";
			var partspec = "'"+selected[0].partspec+"'";
			var partstyle = "'"+selected[0].partstyle+"'";
			var funit = "'"+selected[0].funit+"'";
			var brand = "'"+selected[0].brand+"'";
			var material = "'"+selected[0].material+"'";
			var usingphase = "'"+selected[0].usingphase+"'";
			var isnonstandard = "'"+selected[0].isnonstandard+"'";
			var colorlevel = "'"+selected[0].colorlevel+"'";

			var data = "{itemno:"+itemno+","+"itemclass:"+itemclass+","+"partname:"+partname+","
					+"partspec:"+partspec+","+"partstyle:"+partstyle+","+"funit:"+funit+","
					+"brand:"+brand+","+"material:"+material+","+"usingphase:"+usingphase+","+"isnonstandard:"+isnonstandard+","+"colorlevel:"+colorlevel+","+"itemid:"+id+"}";

			$('#choose_salespackage_item').attr("data-args", data);

			BJUI.dialog('closeCurrent',this);
		}
	}

</script>
<div class="bjui-pageContent">
	<div style="margin:0px 0px 10px 0px;">
		<a href="javascript:;" data-toggle="lookupback" onclick="selecttdlItems()" class="btn btn-blue"
		   data-args="" title="选择本项" data-icon="check" id="choose_salespackage_item"><i class="fa fa-check"></i> 选择</a>
		<button class="btn-close btn"  data-icon="close">关闭</button>
	</div>
	<table id="basics_salespackage_item_table_datagrid" class="table table-hover" data-width="100%"> </table>
</div>