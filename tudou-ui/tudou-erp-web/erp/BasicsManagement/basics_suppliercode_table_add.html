<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript">
        $('#itemSupplier_materials_list').datagrid({
            local: 'remote',
            dataUrl: '/v1/supplier/supplier_choose_list',
            dataType: 'json',
            sortAll: true,
            loadType: 'get',
            filterAll: true,
            height:'95%',
            columns: [
                {name:'suppliercode', width:'150', label:'供应商编码'},
                {name:'suppliername', width:'150', label:'供应商名称'},
            ],
            showLinenumber:true,
            paging: {pageSize:20, selectPageSize:'50,80', pageCurrent:1},
            hiddenFields: ['id'],
            fullGrid: true,
            dblOnClick:'db_onclick',
        });

        function db_onclick() {
            $('#choose_supplier').click()
        }

        function itemSupplier_select_materials(){
            var selected = $("#itemSupplier_materials_list").data('selectedDatas');
            if(selected.length == 0){
                $(this).alertmsg('error', '请在列表中选择要操作的对象。');
            }else if(selected.length > 1){
                $(this).alertmsg('error', '请选择唯一的操作对象。');
            }else{
                var suppliercode = selected[0].suppliercode;//料号
                var suppliername = selected[0].suppliername;//品名
                var id = selected[0].id;
                var data = '{supplierid:'+id+',suppliername:\"'+suppliername+'\",suppliercode:\"'+suppliercode+'\"}';

                $('#choose_supplier').attr("data-args",data);

                BJUI.dialog("closeCurrent",this);
            }
        };


    </script>
</head>
<body>
<div class="bjui-pageContent">
    <div style="margin-bottom:10px;">
        <a href="javascript:;" data-toggle="lookupback" onclick="itemSupplier_select_materials()" class="btn btn-blue" data-args="" title="选择本项" data-icon="check" id="choose_supplier"><i class="fa fa-check"></i> 选择</a>
        <button type="button" class="btn-close btn" data-icon="close"><i class="fa fa-close"></i> 关闭</button>
    </div>
    <table id="itemSupplier_materials_list">

    </table>
</div>
</body>
</html>