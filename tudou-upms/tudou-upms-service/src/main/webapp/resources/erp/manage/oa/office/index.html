<script>

	var oa_office_datagrid_data = {
		local: 'remote',
		dataUrl: $.cookie("tudou-oa-server") + '/act/task/todo',
		dataType: 'json',
		sortAll: false,
		loadType: 'get',
		filterAll: true,
		height: '97%',
		columns: [
			{width: '150', align: 'center', label: '标题',render:function(value,d){
//				var name = d.vars.map.title ? d.vars.map.title : d.task.id
//				var re_value
//				if (d.task.assignee == null){
//					re_value = '<a href="/act/task" title="签收任务"></a>'
//				}else{
					return '<a onclick="oa_office_onclick(d)">'+name+'</a>'
//				}
//				if (value.length > 0){
//					return '<a target="_blank" href="/oa/act/process/resource/read?procDefId='+d.id+'&resType=xml">'+ value +'</a>';
//				}else{
//					return value;
//				}
			}}
		],
		paging: {pageSize: 50, selectPageSize: '50,100,200', pageCurrent: 1},
		fullGrid: true,
//		showToolbar: true,
		inlineEditMult: false,
	}

	$('#oa_office_wait_table').datagrid(oa_office_datagrid_data);

	function oa_office_onclick(d) {

		console.log(d);
	}


	function oa_office_changeValue(num){
		setTimeout(function(){
			if(num == 0){
				$('#oa_office_wait_table').datagrid('refresh_part');
			}else if(num == 1){

			}else if(num == 2){
				$('#oa_office_new_table').datagrid('refresh_part');
			}
		},300);
	}

</script>


<div class="tab-content" style="height: 100%;">
	<ul class="nav nav-tabs" role="tablist" id="btn_list">
		<li class="active">
			<a style="font-size: 13px" href="#oa_office_wait_id" role="tab" data-toggle="tab" onclick="oa_office_changeValue(0)">待办任务</a>
		</li>
		<li>
			<a style="font-size: 13px" href="manage/oa/office/complete.html" role="tab" data-toggle="ajaxtab" data-target="#oa_office_complete_id" data-reload="false" onclick="oa_office_changeValue(1)">已办任务</a>
		</li>
		<li>
			<a style="font-size: 13px" href="manage/oa/office/new.html" role="tab" data-toggle="ajaxtab" data-target="#oa_office_new_id" data-reload="false" onclick="oa_office_changeValue(2)">发起流程</a>
		</li>
	</ul>

	<div class="tab-pane fade active in" id="oa_office_wait_id" style="height: 100%;">
		<table id="oa_office_wait_table" class="table table-hover" data-width="100%"></table>
	</div>

	<div class="tab-pane fade" id="oa_office_complete_id" style="height: 100%;"> </div>

	<div class="tab-pane fade" id="oa_office_new_id" style="height: 100%;"> </div>
</div>